language: minimal

os:
  - osx
addons:
  apt:
    packages:
    - realpath

env:
 - PACKAGE=lib/isl
 - PACKAGE=lib/usb
 - PACKAGE=lib/ftdi
 - PACKAGE=sdcc
 - PACKAGE=prog/iceprog
 - PACKAGE=prog/icefunprog
 - PACKAGE=prog/openocd
 - PACKAGE=prog/flterm
 - PACKAGE=prog/fxload
 - PACKAGE=prog/dfu-util


before_install:
 - source $TRAVIS_BUILD_DIR/.travis/common.sh
 - bash $TRAVIS_BUILD_DIR/.travis/fixup-git.sh
 - bash $TRAVIS_BUILD_DIR/.travis/download_sdk.sh
 - source $TRAVIS_BUILD_DIR/.travis/common.sh

install:
 - ./.travis/install.sh

script:
 - bash $TRAVIS_BUILD_DIR/.travis/script.sh

after_failure:
 - bash $TRAVIS_BUILD_DIR/.travis/after_failure.sh

after_success:
 - bash $TRAVIS_BUILD_DIR/.travis/after_success.sh

cache:
  directories:
   - $HOME/.conda/pkgs
